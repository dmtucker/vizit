!function e(r,t,o){function n(s,a){if(!t[s]){if(!r[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+s+"'")}var p=t[s]={exports:{}};r[s][0].call(p.exports,function(e){var t=r[s][1][e];return n(t?t:e)},p,p.exports,e,r,t,o)}return t[s].exports}for(var i="function"==typeof require&&require,s=0;s<o.length;s++)n(o[s]);return n}({1:[function(e){var r=e("./node_modules/gjtk");window.OpenFusion={error:function(e){var r;switch(e){case"malformed":r="The specified OpenFusion GeoJSON is malformed.";break;case"unsupported":r="Only OpenFusion v3 and above is supported";break;default:r="A problem occurred in the OpenFusion preprocessor."}console.error(r)},map:function(e,t,o){r.isFeatureCollection(e)?r.featuresOf(e).map(function(e){"function"==typeof t&&t(e);var n=e.properties.related;r.isFeatureCollection(n)?"function"==typeof o&&n.features.forEach(o):null!=n&&OpenFusion.error("malformed")}):OpenFusion.error("malformed")},plain:{preprocessor:function(e){switch(e.OpenFusion){case"1":case"2":OpenFusion.error("unsupported");default:return e;case"3":case"4":case"5":return e}return e}},spatial:{epicenterProcessor:function(e){var r=e.properties;r.marker="Marker"},aftershockProcessor:function(e){var r=e.properties;r.marker="CircleMarker",r.markerOptions=JSON.parse(JSON.stringify({stroke:!0,color:"#000",weight:4,opacity:1,fill:!0,fillColor:"#5Af",fillOpacity:.8,dashArray:null,lineCap:null,lineJoin:null,clickable:!0,pointerEvents:null,className:"",radius:8})),"string"==typeof r.image&&(r.markerOptions.fillColor="#E79")},preprocessor:function(e){switch(e.OpenFusion){case"1":case"2":OpenFusion.error("unsupported");default:return e;case"3":case"4":case"5":OpenFusion.map(e,OpenFusion.spatial.epicenterProcessor,OpenFusion.spatial.aftershockProcessor)}}}}},{"./node_modules/gjtk":2}],2:[function(e,r){var t=e("point-in-polygon"),o=e("uri-js"),n=r.exports={isPosition:function(e){return Array.isArray(e)&&e.length>1&&e.every(function(e){return"number"==typeof e})},isPointCoordinates:function(e){return n.isPosition(e)},isMultiPointCoordinates:function(e){return Array.isArray(e)&&e.every(n.isPosition)},isLineStringCoordinates:function(e){return Array.isArray(e)&&e.length>1&&n.isMultiPointCoordinates(e)},isLinearRingCoordinates:function(e){return Array.isArray(e)&&e.length>3&&n.isLineStringCoordinates(e)&&n.equalPositions(e[0],e[e.length-1])},isMultiLineStringCoordinates:function(e){return Array.isArray(e)&&e.every(n.isLineStringCoordinates)},isPolygonCoordinates:function(e){return Array.isArray(e)&&e.every(n.isLinearRingCoordinates)&&e.every(function(e,r,t){return 0==r?!0:n.containedPolygon(e,t[0])})},isMultiPolygonCoordinates:function(e){return Array.isArray(e)&&e.every(n.isPolygonCoordinates)},validCRS:function(e){return null!=e&&("undefined"==typeof e.crs||null===e.crs||n.isCRS(e.crs))},validBbox:function(e){return null!=e&&("undefined"==typeof e.bbox||Array.isArray(e.bbox)&&e.bbox.length%2===0&&!0)},isLink:function(e){return null!=e&&null!=e.properties&&"string"==typeof e.properties.href&&o.parse(e.properties.href).errors.length<1&&("undefined"==typeof e.properties.type||"string"==typeof e.properties.type&&e.properties.type.length>0)},isCRS:function(e){return null!=e&&("name"===e.type&&null!=e.properties&&"string"==typeof e.properties.name&&e.properties.name.length>0||"link"===e.type&&n.isLink(e.properties))},isPoint:function(e){return null!=e&&"Point"===e.type&&n.isPointCoordinates(e.coordinates)&&n.validCRS(e)&&n.validBbox(e)},isMultiPoint:function(e){return null!=e&&"MultiPoint"===e.type&&n.isMultiPointCoordinates(e.coordinates)&&n.validCRS(e)&&n.validBbox(e)},isLineString:function(e){return null!=e&&"LineString"===e.type&&n.isLineStringCoordinates(e.coordinates)&&n.validCRS(e)&&n.validBbox(e)},isMultiLineString:function(e){return null!=e&&"MultiLineString"===e.type&&n.isMultiLineStringCoordinates(e.coordinates)&&n.validCRS(e)&&n.validBbox(e)},isPolygon:function(e){return null!=e&&"Polygon"===e.type&&n.isPolygonCoordinates(e.coordinates)&&n.validCRS(e)&&n.validBbox(e)},isMultiPolygon:function(e){return null!=e&&"MultiPolygon"===e.type&&n.isMultiPolygonCoordinates(e.coordinates)&&n.validCRS(e)&&n.validBbox(e)},isGeometryCollection:function(e){return null!=e&&"GeometryCollection"===e.type&&Array.isArray(e.geometries)&&e.geometries.every(n.isGeometry)&&n.validCRS(e)&&n.validBbox(e)},isFeature:function(e){return null!=e&&"Feature"===e.type&&"object"==typeof e.properties&&n.validCRS(e)&&n.validBbox(e)&&(null===e.geometry||n.isGeometry(e.geometry))},isFeatureCollection:function(e){return null!=e&&"FeatureCollection"===e.type&&Array.isArray(e.features)&&e.features.every(n.isFeature)&&n.validCRS(e)&&n.validBbox(e)},isGeometry:function(e){return n.isPoint(e)||n.isMultiPoint(e)||n.isLineString(e)||n.isMultiLineString(e)||n.isPolygon(e)||n.isMultiPolygon(e)||n.isGeometryCollection(e)},isGeoJSON:function(e){return n.isGeometry(e)||n.isFeature(e)||n.isFeatureCollection(e)},equalPositions:function(e,r){return n.isPosition(e)&&n.isPosition(r)&&e.length==r.length&&e.every(function(t,o){return e[o]==r[o]})},containedPolygon:function(e,r){return e.every(function(e){return t(e,r)})},Point:function(e,r,t){var o=null;return"number"==typeof r&&"number"==typeof e&&(o={type:"Point",coordinates:[r,e]},"number"==typeof t&&o.coordinates.push(t)),o},Feature:function(e,r){var t={type:"Feature",geometry:null,properties:"object"==typeof r?r:{}};return n.isGeometry(e)&&(t.geometry=e),t},FeatureCollection:function(e){var r={type:"FeatureCollection",features:[]};return n.isFeature(e)?r.features.push(e):Array.isArray(e)&&e.forEach(function(e){n.isFeature(e)&&r.features.push(e)}),r},GeometryCollection:function(e){var r={type:"GeometryCollection",geometries:[]};return n.isGeometry(e)?r.geometries.push(e):Array.isArray(e)&&e.forEach(function(e){n.isGeometry(e)&&r.geometries.push(e)}),r},positionsOf:function(e){var r=[],t=function(e){e.forEach(function(e){r.push(e)})},o=function(e){e.forEach(t)};switch(e.type){case"Point":r.push(e.coordinates);break;case"MultiPoint":case"LineString":t(e.coordinates);break;case"MultiLineString":case"Polygon":o(e.coordinates);break;case"MultiPolygon":e.coordinates.forEach(o);break;case"GeometryCollection":t(n.positionsOf(e.geometries));break;case"Feature":t(n.positionsOf(e.geometry));break;case"FeatureCollection":e.features.forEach(function(e){t(n.positionsOf(e.geometry))})}return r},featuresOf:function(e){var r=[];switch(e.type){case"Feature":r.push(e);break;case"FeatureCollection":e.features.forEach(function(e){n.featuresOf(e).forEach(function(e){r.push(e)})})}return r},geometriesOf:function(e){var r=[],t=function(e){n.geometriesOf(e.geometry).forEach(function(e){r.push(e)})};switch(e.type){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":r.push(e);break;case"GeometryCollection":e.geometries.forEach(function(e){n.geometriesOf(e).forEach(function(e){r.push(e)})});break;case"Feature":t(e);break;case"FeatureCollection":e.features.forEach(t)}return r}}},{"point-in-polygon":3,"uri-js":7}],3:[function(e,r){r.exports=function(e,r){for(var t=e[0],o=e[1],n=!1,i=0,s=r.length-1;i<r.length;s=i++){var a=r[i][0],u=r[i][1],p=r[s][0],c=r[s][1],l=u>o!=c>o&&(p-a)*(o-u)/(c-u)+a>t;l&&(n=!n)}return n}},{}],4:[function(e){e("./schemes/http"),e("./schemes/urn")},{"./schemes/http":5,"./schemes/urn":6}],5:[function(e){!function(){var r=e("../uri").URI;r.SCHEMES.http={serialize:function(e){return(80===e.port||""===e.port)&&(e.port=void 0),e.path||(e.path="/"),e}}}()},{"../uri":7}],6:[function(e){!function(){var r=e("../uri"),t=r.URI,o=r.pctEncChar,n="(?:[0-9A-Za-z][0-9A-Za-z\\-]{1,31})",i="(?:\\%[0-9A-Fa-f]{2})",s="[0-9A-Za-z\\(\\)\\+\\,\\-\\.\\:\\=\\@\\;\\$\\_\\!\\*\\'\\/\\?\\#]",a="(?:(?:"+i+"|"+s+")+)",u=new RegExp("^urn\\:("+n+")$"),p=new RegExp("^("+n+")\\:("+a+")$"),c=/^([^\:]+)\:(.*)/,l=/[\x00-\x20\\\"\&\<\>\[\]\^\`\{\|\}\~\x7F-\xFF]/g,f=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/;t.SCHEMES.urn={parse:function(e,r){var o,n,i=e.path.match(p);return i||(r.tolerant||e.errors.push("URN is not strictly valid."),i=e.path.match(c)),i?(o="urn:"+i[1].toLowerCase(),n=t.SCHEMES[o],n||(n=t.SCHEMES[o]={}),n.serialize||(n.serialize=t.SCHEMES.urn.serialize),e.scheme=o,e.path=i[2],n.parse&&n.parse(e,r)):e.errors.push("URN can not be parsed."),e},serialize:function(e,r){var t,n=e.scheme||r.scheme;if(n&&"urn"!==n){var t=n.match(u);t||(t=["urn:"+n,n]),e.scheme="urn",e.path=t[1]+":"+(e.path?e.path.replace(l,o):"")}return e}},t.SCHEMES["urn:uuid"]={parse:function(e,r){r.tolerant||e.path&&e.path.match(f)||e.errors.push("UUID is not valid.")},serialize:function(e,r){return r.tolerant||e.path&&e.path.match(f)?e.path=(e.path||"").toLowerCase():e.scheme=void 0,t.SCHEMES.urn.serialize(e,r)}}}()},{"../uri":7}],7:[function(e,r,t){"undefined"==typeof t&&(t={}),"function"!=typeof e&&(e=function(){"use strict";return t}),URI=function(){"use strict";var r=function(e){for(var r=e,t=1,o=arguments[t];o;)r=r.slice(0,-1)+o.slice(1),o=arguments[++t];return r},o=function(e){return"(?:"+e+")"},n="[A-Za-z]",i="[0-9]",s=r(i,"[A-Fa-f]"),a=o("%"+s+s),u="[\\:\\/\\?\\#\\[\\]\\@]",p="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",c=r(u,p),l=r(n,i,"[\\-\\.\\_\\~]"),f=o(n+r(n,i,"[\\+\\-\\.]")+"*"),h=o(o(a+"|"+r(l,p,"[\\:]"))+"*"),m=o(o("25[0-5]")+"|"+o("2[0-4]"+i)+"|"+o("1"+i+i)+"|"+o("[1-9]"+i)+"|"+i),g=o(m+"\\."+m+"\\."+m+"\\."+m),d=o(s+"{1,4}"),y=(o(o(d+"\\:"+d)+"|"+g),o(r(l,p,"[\\:]")+"+")),v=o("v"+s+"+\\."+r(l,p,"[\\:]")+"+"),C=o("\\["+o(y+"|"+v)+"\\]"),S=o(o(a+"|"+r(l,p))+"*"),E=o(C+"|"+g+"|"+S),b=o(i+"*"),x=o(o(h+"@")+"?"+E+o("\\:"+b)+"?"),P=o(a+"|"+r(l,p,"[\\:\\@]")),F=o(P+"*"),A=o(P+"+"),O=o(o(a+"|"+r(l,p,"[\\@]"))+"+"),R=o(o("\\/"+F)+"*"),M=o("\\/"+o(A+R)+"?"),w=o(O+R),z=o(A+R),k=o(""),L=(o(R+"|"+M+"|"+w+"|"+z+"|"+k),o(o(P+"|[\\/\\?]")+"*")),q=o(o(P+"|[\\/\\?]")+"*"),U=o(o("\\/\\/"+x+R)+"|"+M+"|"+z+"|"+k),I=o(f+"\\:"+U+o("\\?"+L)+"?"+o("\\#"+q)+"?"),G=o(o("\\/\\/"+x+R)+"|"+M+"|"+w+"|"+k),$=o(G+o("\\?"+L)+"?"+o("\\#"+q)+"?"),j=(o(I+"|"+$),o(f+"\\:"+U+o("\\?"+L)+"?"),"^("+f+")\\:"+o(o("\\/\\/("+o("("+h+")@")+"?("+E+")"+o("\\:("+b+")")+"?)")+"?("+R+"|"+M+"|"+z+"|"+k+")")+o("\\?("+L+")")+"?"+o("\\#("+q+")")+"?$"),H="^(){0}"+o(o("\\/\\/("+o("("+h+")@")+"?("+E+")"+o("\\:("+b+")")+"?)")+"?("+R+"|"+M+"|"+w+"|"+k+")")+o("\\?("+L+")")+"?"+o("\\#("+q+")")+"?$",D=("^("+f+")\\:"+o(o("\\/\\/("+o("("+h+")@")+"?("+E+")"+o("\\:("+b+")")+"?)")+"?("+R+"|"+M+"|"+z+"|"+k+")")+o("\\?("+L+")")+"?$","^"+o("\\#("+q+")")+"?$","^"+o("("+h+")@")+"?("+E+")"+o("\\:("+b+")")+"?$",new RegExp("("+j+")|("+H+")")),N=new RegExp(r("[^]",n,i,"[\\+\\-\\.]"),"g"),B=new RegExp(r("[^\\%\\:]",l,p),"g"),_=new RegExp(r("[^\\%]",l,p),"g"),J=new RegExp(r("[^\\%\\/\\:\\@]",l,p),"g"),Z=new RegExp(r("[^\\%\\/\\@]",l,p),"g"),T=new RegExp(r("[^\\%]",l,p,"[\\:\\@\\/\\?]"),"g"),K=T,Q=new RegExp(r("[^]",l,p),"g"),V=new RegExp(l,"g"),W=(new RegExp(r("[^\\%]",l,c),"g"),new RegExp(a+"+","g")),X=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?([^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n)*))?/i,Y=/^\.\.?\//,er=/^\/\.(\/|$)/,rr=/^\/\.\.(\/|$)/,tr=/^\/?(?:.|\n)*?(?=\/|$)/,or=void 0==="".match(/(){0}/)[1],nr=function(e){var r,t=e.charCodeAt(0);return r=16>t?"%0"+t.toString(16).toUpperCase():128>t?"%"+t.toString(16).toUpperCase():2048>t?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()},ir=function(e){for(var r,t,o="",n=0;n<e.length;)r=parseInt(e.substr(n+1,2),16),128>r?(t=String.fromCharCode(r),o+=t.match(V)?t:e.substr(n,3),n+=3):r>191&&224>r?(o+=e.substr(n,6),n+=6):(o+=e.substr(n,9),n+=9);return o},sr=function(e){for(var r,t,o,n="",i=0;i<e.length;)r=parseInt(e.substr(i+1,2),16),128>r?(n+=String.fromCharCode(r),i+=3):r>191&&224>r?(t=parseInt(e.substr(i+4,2),16),n+=String.fromCharCode((31&r)<<6|63&t),i+=6):(t=parseInt(e.substr(i+4,2),16),o=parseInt(e.substr(i+7,2),16),n+=String.fromCharCode((15&r)<<12|(63&t)<<6|63&o),i+=9);return n},ar=function(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()},ur=function(){this.errors=[]},pr=t;return ur.prototype={scheme:void 0,userinfo:void 0,host:void 0,port:void 0,path:void 0,query:void 0,fragment:void 0,reference:void 0,errors:void 0},pr.SCHEMES={},pr.parse=function(e,r){var t,o,n=new ur;return e=e?e.toString():"",r=r||{},"suffix"===r.reference&&(e=(r.scheme?r.scheme+":":"")+"//"+e),t=e.match(D),t&&(t=t[1]?t.slice(1,10):t.slice(10,19)),t||(r.tolerant||n.errors.push("URI is not strictly valid."),t=e.match(X)),t?(or?(n.scheme=t[1],n.userinfo=t[3],n.host=t[4],n.port=parseInt(t[5],10),n.path=t[6]||"",n.query=t[7],n.fragment=t[8],isNaN(n.port)&&(n.port=t[5])):(n.scheme=t[1]||void 0,n.userinfo=-1!==e.indexOf("@")?t[3]:void 0,n.host=-1!==e.indexOf("//")?t[4]:void 0,n.port=parseInt(t[5],10),n.path=t[6]||"",n.query=-1!==e.indexOf("?")?t[7]:void 0,n.fragment=-1!==e.indexOf("#")?t[8]:void 0,isNaN(n.port)&&(n.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?t[4]:void 0)),n.reference=void 0===n.scheme&&void 0===n.userinfo&&void 0===n.host&&void 0===n.port&&void 0===n.path&&void 0===n.query?"same-document":void 0===n.scheme?"relative":void 0===n.fragment?"absolute":"uri",r.reference&&"suffix"!==r.reference&&r.reference!==n.reference&&n.errors.push("URI is not a "+r.reference+" reference."),o=pr.SCHEMES[(r.scheme||n.scheme||"").toLowerCase()],o&&o.parse&&o.parse(n,r)):n.errors.push("URI can not be parsed."),n},pr._recomposeAuthority=function(e){var r=[];return void 0!==e.userinfo&&(r.push(e.userinfo.toString().replace(B,nr)),r.push("@")),void 0!==e.host&&r.push(e.host.toString().toLowerCase().replace(_,nr)),"number"==typeof e.port&&(r.push(":"),r.push(e.port.toString(10))),r.length?r.join(""):void 0},pr.removeDotSegments=function(e){for(var r,t=[];e.length;)e.match(Y)?e=e.replace(Y,""):e.match(er)?e=e.replace(er,"/"):e.match(rr)?(e=e.replace(rr,"/"),t.pop()):"."===e||".."===e?e="":(r=e.match(tr)[0],e=e.slice(r.length),t.push(r));return t.join("")},pr.serialize=function(e,r){var t,o,n,i=[];return r=r||{},t=pr.SCHEMES[(r.scheme||e.scheme||"").toLowerCase()],t&&t.serialize&&t.serialize(e,r),"suffix"!==r.reference&&e.scheme&&(i.push(e.scheme.toString().toLowerCase().replace(N,"")),i.push(":")),o=pr._recomposeAuthority(e),void 0!==o&&("suffix"!==r.reference&&i.push("//"),i.push(o),e.path&&"/"!==e.path.charAt(0)&&i.push("/")),void 0!==e.path&&(n=pr.removeDotSegments(e.path.toString().replace(/%2E/gi,".")),n=e.scheme?n.replace(J,nr):n.replace(Z,nr),void 0===o&&(n=n.replace(/^\/\//,"/%2F")),i.push(n)),void 0!==e.query&&(i.push("?"),i.push(e.query.toString().replace(T,nr))),void 0!==e.fragment&&(i.push("#"),i.push(e.fragment.toString().replace(K,nr))),i.join("").replace(W,ir).replace(/%[0-9A-Fa-f]{2}/g,function(e){return e.toUpperCase()})},pr.resolveComponents=function(e,r,t,o){var n=new ur;return o||(e=pr.parse(pr.serialize(e,t),t),r=pr.parse(pr.serialize(r,t),t)),t=t||{},!t.tolerant&&r.scheme?(n.scheme=r.scheme,n.userinfo=r.userinfo,n.host=r.host,n.port=r.port,n.path=pr.removeDotSegments(r.path),n.query=r.query):(void 0!==r.userinfo||void 0!==r.host||void 0!==r.port?(n.userinfo=r.userinfo,n.host=r.host,n.port=r.port,n.path=pr.removeDotSegments(r.path),n.query=r.query):(r.path?("/"===r.path.charAt(0)?n.path=pr.removeDotSegments(r.path):(n.path=void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?e.path.slice(0,e.path.lastIndexOf("/")+1)+r.path:r.path:"/"+r.path,n.path=pr.removeDotSegments(n.path)),n.query=r.query):(n.path=e.path,n.query=void 0!==r.query?r.query:e.query),n.userinfo=e.userinfo,n.host=e.host,n.port=e.port),n.scheme=e.scheme),n.fragment=r.fragment,n},pr.resolve=function(e,r,t){return pr.serialize(pr.resolveComponents(pr.parse(e,t),pr.parse(r,t),t,!0),t)},pr.normalize=function(e,r){return"string"==typeof e?e=pr.serialize(pr.parse(e,r),r):"object"===ar(e)&&(e=pr.parse(pr.serialize(e,r),r)),e},pr.equal=function(e,r,t){return"string"==typeof e?e=pr.serialize(pr.parse(e,t),t):"object"===ar(e)&&(e=pr.serialize(e,t)),"string"==typeof r?r=pr.serialize(pr.parse(r,t),t):"object"===ar(r)&&(r=pr.serialize(r,t)),e===r},pr.escapeComponent=function(e){return e&&e.toString().replace(Q,nr)},pr.unescapeComponent=function(e){return e&&e.toString().replace(W,sr)},t.pctEncChar=nr,t.pctDecChars=sr,t.Components=ur,t.URI=pr,t.pctEncChar=nr,t.pctDecChars=sr,t.Components=ur,t.URI={SCHEMES:pr.SCHEMES,parse:pr.parse,removeDotSegments:pr.removeDotSegments,serialize:pr.serialize,resolveComponents:pr.resolveComponents,resolve:pr.resolve,normalize:pr.normalize,equal:pr.equal,escapeComponent:pr.escapeComponent,unescapeComponent:pr.unescapeComponent},e("./schemes"),pr}()},{"./schemes":4}]},{},[1]);
