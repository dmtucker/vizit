var OpenFusion={error:function(e){var r;switch(e){case"malformed":r="The specified OpenFusion GeoJSON is malformed.";break;case"unsupported":r="Only OpenFusion v3 and above is supported";break;default:r="A problem occurred in the OpenFusion preprocessor."}console.error(r)},mapGeoJSON:function(e,r,o){GeoJSON.isFeatureCollection(e)?GeoJSON.mapFeatures(e,function(e){"function"==typeof r&&r(e),"undefined"!=typeof e.properties.related&&(GeoJSON.isFeatureCollection(e.properties.related)?"function"==typeof o&&e.properties.related.features.forEach(o):OpenFusion.error("malformed"))}):OpenFusion.error("malformed")},plain:{preprocessor:function(e){switch(e.OpenFusion){case"1":case"2":OpenFusion.error("unsupported");default:return e;case"3":case"4":case"5":return e}return e}},spatial:{epicenterHandler:function(e){var r=e.properties;r.marker="Marker"},aftershockHandler:function(e){var r=e.properties;r.marker="CircleMarker",r.markerOptions=JSON.parse(JSON.stringify({stroke:!0,color:"#000",weight:4,opacity:1,fill:!0,fillColor:"#5Af",fillOpacity:.8,dashArray:null,lineCap:null,lineJoin:null,clickable:!0,pointerEvents:null,className:"",radius:8})),"string"==typeof r.image&&(r.markerOptions.fillColor="#E79")},preprocessor:function(e){switch(e.OpenFusion){case"1":case"2":OpenFusion.error("unsupported");default:return e;case"3":case"4":case"5":OpenFusion.mapGeoJSON(e,OpenFusion.spatial.epicenterHandler,OpenFusion.spatial.aftershockHandler)}}}};
